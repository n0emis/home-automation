---
users:
- username: n0emis
  state: present
  shell: /bin/zsh
  sudo: yes
  public_key: |
    ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC8xqVakxJ+AwcIrS/wyL03N++pE09epwMFlIMXWvlpwwEp1J/0H7nygwxk/9LIZdabs/ETWn0s8oHAkc7YR1c6ajSTCDiZEYATAWt7t8t4Gw/80c8u8T50lIqmiDEEVbOVv3Vta/pAN4hAUp9U5DpYCkQbvF+NKKcK3Yp8d9usNC6ohqgTK+IGAEdMhvpbbNppDMXoWHuynBzUX7TS6ST6yEr0tD+CBbCpbfcMuwTI3lNtfywEVpuFaeHqDZx2QDrEX4bg0dRKgQstbXYdqmBfnOiBpUr8Wyl8U1J24rN+E07pBw/8KDGWbVg19/Ex8o4ht/p5voUfKVjD/DwWXTLntBirjfAgQAm4GH/qP4x3zNiTtlYlQFbXSk6VEVrTrxCB5rTWvGnhg31tk5P3YwvagDmGABazY5s/8tlttSc1yWBctWQJCjxSqcCLekxG4D1rVuGKCKOZgflQ9QFdQlKycInPBek3zi0i3GYkE1YnNFye5ggOnxT8qGuKjfdtZI9qvMJQO8lbEDzbYQvNns1V/k4ZobiihYwrG5TJUzZFEpMYetDK6tI8BRU11d+ja0jWzguj5/7wc0nrr/BiZ8FkAr2fZ60j2aI5kG0s3qjbrQbB/RXaGP9hRU0+480+IokNJJIcjv5iwH5ophdrjC8GH4So2kPPt0NXob1yNysdjw== simeon@noemis.me
    ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEcOPtW5FWNIdlMQFoqeyA1vHw+cA8ft8oXSbXPzQNL9 n0emis@n0emis.eu
  oh_my_zsh:
    theme: agnoster
- username: root
  state: present
  shell: /bin/zsh
  sudo: yes
  oh_my_zsh:
    theme: agnoster

oh_my_zsh_theme: "agnoster"

ansible_python_interpreter: "/usr/bin/python3"

unattended_mail: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    39666636373833623330643661343464336232356264313638393564376533343133396663393237
    6537663635326262373535646431373933323337646536320a663739633763343237323738626332
    63323166363261356636313039383830356562376133613735343732623535353537373666353662
    6334353064616165630a396665653363396138383231313030663065323134333235663563323438
    35313630643565383931363835326636646536376237373364306130396137363235

tlsa_data: "3 1 1 c9c26f6bbc3de806274af05fdce17eb019a6c2fb7281bf5559f5dedcc07683cb"

dyndns_host: elara.het.nue.de.n0emis.eu

traefik_version: "v2.2.3"
traefik_config_directory: /etc/traefik
# HTTP-Challenge
traefik_tls_letsencrypt_challenges_http:
  enable: yes
  email: "le@services.n0emis.eu"
  name: "le_http" # Name of the certificate resolver
  entryPoint: "http"
  storage: "{{ traefik_config_directory }}/acme_http.json"
# TLS-Challenge
traefik_tls_letsencrypt_challenges_tls:
  enable: yes
  email: "le@services.n0emis.eu"
  name: "le_tls" # Name of the certificate resolver
  storage: "{{ traefik_config_directory }}/acme_tls.json"
traefik_default_cert_resovler: "le_http"
traefik_dashboard:
  enable: yes
  rule: "Host(`{{ ansible_fqdn }}`)"
  name: "internal_dashboard"
  tls_cert_resolver: "{{ traefik_default_cert_resovler }}"
  https_redirect: yes
  additional_middlewares: []

traefik_dynamic_config_files_paths:
  - "traefik/{{ ansible_fqdn }}/*"

dyndns_enable: no
php_date_timezone: "Europe/Berlin"
nginx_ppa_use: true

dyndns_nameserver:
  - ns.n0emis.eu

#dyndns_pubkey: "{{ lookup('passwordstore', 'infra/dyndns/ssh_key subkey=user') }}"
#dyndns_privkey: "{{ lookup('passwordstore', 'infra/dyndns/ssh_key') | b64decode }}"


ap_radius_server_ip: "10.152.4.3"
ap_radius_password: "testing123"
#ap_radius_password: "{{ lookup('passwordstore', 'infra/ipa.int.goe.de.n0emis.eu/radius') }}"

ap_iot_wifi_ssid: "{{ lookup('passwordstore', 'infra/wireless/iot subkey=user') }}"
ap_iot_wifi_password: "{{ lookup('passwordstore', 'infra/wireless/iot') }}"

### LOOKING GLASS
dn42_local_v4: "172.20.190.96"
dn42_local_v6: "fdf4:2331:fa09::1"
dn42_local_as: "424242424243"

bird_lg_proxy_enabled: no
bird_lg_domain: "n0emis.dn42"
bird_lg_asn_zone: "asn.dn42"
bird_lg_webservice_port: 8000

bird_lg_access:
  - "{{ hostvars['elara.het.nue.de.n0emis.eu'].ansible_default_ipv4.address }}"
  - "{{ hostvars['elara.het.nue.de.n0emis.eu'].ansible_default_ipv6.address }}"

bird_lg_proxys:
  - name: himalia.n0emis.dn42
    address: himalia.dn42.n0emis.eu:5000
    as: "{{ dn42_local_as }}"
    ips:
      - "{{ dn42_local_v4 }}"
      - "{{ dn42_local_v6 }}"
